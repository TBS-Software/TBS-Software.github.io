<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8">
        <title>Большие зоны в InfraWorks</title>
    <link href="../../css/rootpage.css" rel="stylesheet">
    </head>
    <body>
        
    <div id="header">
        <center><a href="../../index.html" class="nav" alt="Перейти на начальную страницу">ВЕРНУТЬСЯ К ПУБЛИКАЦИЯМ</a></center>
        <hr class="hr-two-color">
            
    </div>
        <div id="article">
            
        <h2>Большие модели в InfraWorks и производительность графики</h2>
            <h5> Дата публикации: 22 февраля 2021 г.<br> Автор: Егор Гребенюк</h5>
            
            <p>  В программе Autodesk InfraWorks есть системное ограничение на загрузку не более чем 200 кв. км площади через Конструктор модели, и многие пользователи уверены, что модели больше данной площади в программе обрабатывать нельзя. На самом деле, можно - и в данной небольшой статье мы рассмотрим некоторые операции поподробнее...</p>
                <h3>Загрузка местности через Конструктор моделей</h3>
            <img src="../../images/articles/22-02-2021-iw-large-zone/ModelBuilder.png" width="700" alt="Model Builder photo">
            <center>Рисунок 1 - Вид Конструктора модели InfraWorks ири выделении зоны большей 200 кв. км</center>
            <p>Для необходимости загрузки местности, размеры которой превышают в плане 200 кв. км необходимо воспользоваться опцией загрузки области через Импорт границ SHP файла. Перед этим, надо данные границы подготовить - это можно сделать через Civil 3D, воспользовавшись стандартным инструментом AutoCAD - "прямоугольный массив". Создадим группу квадратов 14х14 км (196 кв. км суммарно) с взаимным перекрытием порядка 50 метров для последующего схождения поверхностей рельефа на стыках моделей. Далее экспортируем полученные полигоны каждый в отдельный SHP файл, убедившись что:</p> 
            <ul>
            <li>а) контур из полилинии имеет тег "Замкнуто: Да"</li>
            <li>б) экспорт идет в формат Esri SHP</li>
            <li>в) на вкладке "Выборка" стоит опция "Выбор вручную" и экспорт в формате "Полигон"</li>
            <li>г) на вкладке "Параметры" стоит галочка "Преобразовать в систему координат LL84"</li> 
            <li>д) на вкладке "Параметры" стоит галочка "Рассматривать замкнутые полилинии как полигоны"</li> 
            </ul>
            <img src="../../images/articles/22-02-2021-iw-large-zone/C3D_SHP.png" width="700" alt="Export shp from Civil 3D">
            <center>Рисунок 2 - Экспорт из Civil 3D контура полигона</center>
            <p> После этого в IW выставляем опцию загрузки границ из SHP-файлы и выбираем файлы SHP и PRJ для интересуемого квадрата местности, выставляем название модели и ждем облачной обработки модели. После повторения данных действий для всех моделей производим экспорт из каждой файлов IMX (Рельеф + Дороги), далее создаем пользовательскую модель и импортируем туда все файлы IMX. Profit!
            <b>Примечание:</b> автор предпочитает грузить рельеф местности иными способами сразу единым файлом (через QGIS) обходя столь длительный процесс подготовки, об этом мы поговорим в отдельной статье. </p>
                <h3>Загрузка растра Bing на всю местность</h3>
        <p>Предположим, что мы создали пользовательскую модель способом выше и ходим загрузить поверх неё растровый спутниковый снимок. Стандартный функционал InfraWorks предоставляет такую возможность из панели "Источники данных" запускаем менеджер поделючения к базам данных (см. Рисунок 3 ниже), выбираем пункт "Карты Bing", необходимое разрешение и обновляем данный источник данных для старта загрузки изображения</p>
            <img src="../../images/articles/22-02-2021-iw-large-zone/IW_BingMaps.png" width="700" alt="Load BING maps">
            <center>Рисунок 3 - Подключение к Bing-картам</center>
            <p><b>Примечание:</b>b> карты Bing имеют низкую степень детализации и актуальности на территории РФ, поэтому рекомендуется пользоваться иными картами (мы это также освятим в рамках последующих статей)</p>
            <p>Сопутствующая задача, которая может стоять - выгрузить растр местности, повторяющий очертания рельефа в среду Nawisworks - для этого можно воспользоваться экспортом сцены IW в формат FBX с разделением на файлы (оставить только "Поверхность земли"). Сам рельеф предварительно удалять не надо (так как модель регенерируется и в отсутствие рельефа растр примет плоский вид</p>
            <h3>Производительность графики</h3>
            <p>На больших сборках рекомендуется настраивать виды (см. Рисунок 4 ниже), а именно убирать прорисовку деревьев, неба, анимации</p>
            <img src="../../images/articles/22-02-2021-iw-large-zone/GraphicPerform.png" width="700" alt="Low graphic settings">
            <center>Рисунок 4 - Настройки текущего вида модели и результат</center>
            <p>Похожее окно, управляющее детализацией моделей - это параметры 3D-Графики, доступные из Настроек программы (там, как правило, убирается прорисовка фасадов, отражения в воде и т.д. - см. Рисунок 5)</p>
            <img src="../../images/articles/22-02-2021-iw-large-zone/GraphicPerformSettings.png" width="700" alt="3D Graphic settings">
            <center>Рисунок 5 - Настройки отображения 3d-графики</center>
            <p>Индикатором скорости отклика модели на выставленные настройки может служить интересная системная опция "Проверка производительности" (см. Рисунок 6 ниже).Результат выполнения - это справочное диалоговое окно с количество fps для сцены модели.</p>
             <img src="../../images/articles/22-02-2021-iw-large-zone/CheckPerporm.png" width="500" alt="Check graphic performance">
            <center>Рисунок 6 - Проверка частоты кадров текущей сцены</center>
            <p><b>Примечание:</b> проверка показывает разные результаты в завимости от степени приближения к разным группам элементов модели. Для большей чистоты рекомендуется применять ее в месте наибольшего скопления элементов (максимальный LOD детализации). </p>
        </div>
        <div id="bottom-side">
            <hr class="hr-two-color">
            <h5>Copyright © TBS-Software, 2020-2021</h5>
        </div>
        </body>
</html>